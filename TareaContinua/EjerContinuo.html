<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejercicio continuo nº7</title>
  </head>
  <!-- 7.- Da al usuario la opción de seleccionar una acción sort de la lista. 
    Cuando se selecciona esta opción, el usuario debería poder especificar si desea ordenar 
    los contactos por nombre, teléfono o correo electrónico. -->
  <body>
    <script>
      const BODY = document.body
      const PARRAF = document.createElement("p")

      let contactos = [
        {
          nombre: "Maxwell Wright",
          telefono: "(0191) 719 6495",
          correo: "Curabitur.egestas.nunc@nonummyac.co.uk",
        },
        {
          nombre: "Raja Villareal",
          telefono: "0866 398 2895",
          correo: "posuere.vulputate@sed.com",
        },
        {
          nombre: "Helen Richards",
          telefono: "0800 1111",
          correo: "libero@convallis.edu",
        },
      ]

      contactos.push({
        nombre: "Haley",
        telefono: "0913 531 3030",
        correo: "risus.Quisque@urna.ca",
      })

      var menu = `
      1. Mostrar el primer contacto
      2. Mostrar el último contacto
      3. Añadir un nuevo contacto
      4. Mostrar un contacto
      5. Mostrar todos los contactos
      6. Añadir un nuevo contacto v2
      7. Ordenar por un elemento
      `

      var opcion = parseInt(prompt(menu, "Elige que quieres hacer"))

      if (opcion === 1) {
        // Visualiar el primer contacto
        newContacto()
      } else if (opcion === 2) {
        // Visualizar el ultimo contacto
        lastContact()
      } else if (opcion === 3) {
        // Añadir un nuevo contacto
        firstContact()
      } else if (opcion === 4) {
        // Mostrar un contacto
        let indice = prompt("Introduce un indice")
        showContact(contactos, indice)
      } else if (opcion === 5) {
        // Mostrar todos los contactos
        showAllContacts(contactos)
      } else if (opcion === 6) {
        // Añadir un nuevo contacto v2
        let nombre = prompt("Introduce el nombre")
        let telefono = prompt("Introduce el telefono")
        let correo = prompt("Introduce el correo")
        addNewContact(contactos, nombre, telefono, correo)
      } else if (opcion === 7) {
        // Mostrar todos los contactos
        let elemento = prompt("Introduce el elemento por que quieres ordenar")
        ordenarContactos(elemento)
      } else {
        // Si no se ha introducido un numero no valido o una cadena de texto, lanzamos mensaje de error
        alert("Ha ocurrio algun error por favor intentelo de nuevo")
      }

      function newContacto() {
        // Funcion para agregar un nuevo contacto
        let nombreContactoNuevo = prompt("Escribe el nombre del nuevo contacto")

        // Comprobamos si el nombre ha sido introducido
        while (nombreContactoNuevo == null || nombreContactoNuevo === "") {
          nombreContactoNuevo = prompt(
            "No se ha introducido el nombre del nuevo contacto, prueba de nuevo"
          )
        }

        let telefonoContactoNuevo = prompt(
          "Escribe el telefono del nuevo contacto"
        )
        // Comprobamos si el telefono ha sido introducido
        while (telefonoContactoNuevo == null || telefonoContactoNuevo === "") {
          telefonoContactoNuevo = prompt(
            "No se ha introducido el telefono del nuevo contacto, prueba de nuevo"
          )
        }

        let correoContactoNuevo = prompt("Escribe el correo del nuevo contacto")
        // Comprobamos si el correo ha sido introducido
        while (correoContactoNuevo == null || correoContactoNuevo === "") {
          correoContactoNuevo = prompt(
            "No se ha introducido el correo del nuevo contacto, prueba de nuevo"
          )
        }

        contactos.push({
          nombre: nombreContactoNuevo,
          telefono: telefonoContactoNuevo,
          correo: correoContactoNuevo,
        })

        // insertamos en HTML el ultimo contacto
        PARRAF.innerHTML =
          "Nuevo Contacto: " +
          nombreContactoNuevo +
          " / " +
          telefonoContactoNuevo +
          " / " +
          correoContactoNuevo +
          "\n<br/> Creado Correctamente"
        BODY.appendChild(PARRAF)
      } // nuevoContacto()

      function lastContact() {
        // Funcion para visualizar unicamente el ultimo contacto
        let ultimoContacto = contactos[contactos.length - 1]

        console.log(
          ultimoContacto.nombre + " /",
          ultimoContacto.telefono + " /",
          ultimoContacto.correo
        )

        // insertamos en HTML el ultimo contacto
        PARRAF.innerHTML =
          "Ultimo Contacto: " +
          ultimoContacto.nombre +
          " / " +
          ultimoContacto.telefono +
          " / " +
          ultimoContacto.correo
        BODY.appendChild(PARRAF)
      } // ultimoContacto()

      function firstContact() {
        // Funcion para visualizar solamente el primer contacto
        let primerContacto = contactos[0]

        console.log(
          "Primer Contacto: ",
          primerContacto.nombre + " /",
          primerContacto.telefono + " /",
          primerContacto.correo
        )

        // insertamos en HTML el primer contacto
        PARRAF.innerHTML =
          "Primer Contacto: " +
          primerContacto.nombre +
          " / " +
          primerContacto.telefono +
          " / " +
          primerContacto.correo
        BODY.appendChild(PARRAF)
      } // primerContacto()

      function showContact(lista, indice) {
        // Funcion para visualizar solamente el contacto especificado en el parametro 'indice'
        if (lista instanceof Array) {
          if (indice <= lista.length - 1 && indice >= 0) {
            let contacto = lista[indice]
            console.log(contacto)
            console.log(
              "Contacto: ",
              contacto.nombre + " /",
              contacto.telefono + " /",
              contacto.correo
            )

            // insertamos en HTML el contacto
            PARRAF.innerHTML =
              "Contacto: " +
              contacto.nombre +
              " / " +
              contacto.telefono +
              " / " +
              contacto.correo
            BODY.appendChild(PARRAF)
          } else {
            alert("Ha ocurrido un error vuelve a intentarlo mas tarde.")
          }
        } else {
          alert("Ha ocurrido un error vuelve a intentarlo mas tarde.")
        }
      }

      function showAllContacts(lista) {
        if (lista instanceof Array) {
          lista.forEach((contacto, indice) => {
            console.log(
              "Contacto Nº" + (indice + 1) + ": ",
              contacto.nombre + " /",
              contacto.telefono + " /",
              contacto.correo
            )
            // insertamos en HTML los contactos
            PARRAF.innerHTML +=
              "Contacto: " +
              contacto.nombre +
              " / " +
              contacto.telefono +
              " / " +
              contacto.correo +
              "\n<br/>"
          })
          BODY.appendChild(PARRAF)
        }
      }

      function addNewContact(lista, nombre, telefono, correo) {
        // Funcion para añadir un nuevo contacto pasandole los parametros del contacto
        if (lista instanceof Array) {
          while (correo == null || correo === "") {
            correo = prompt(
              "No se ha introducido el correo del nuevo contacto, prueba de nuevo"
            )
          }
          while (nombre == null || nombre === "") {
            nombre = prompt(
              "No se ha introducido el nombre del nuevo contacto, prueba de nuevo"
            )
          }
          // Comprobamos si el telefono ha sido introducido
          while (telefono == null || telefono === "") {
            telefono = prompt(
              "No se ha introducido el telefono del nuevo contacto, prueba de nuevo"
            )
          }
          lista.push({
            nombre: nombre,
            telefono: telefono,
            correo: correo,
          })

          // insertamos en HTML el ultimo contacto
          PARRAF.innerHTML =
            "Nuevo Contacto: " +
            nombre +
            " / " +
            telefono +
            " / " +
            correo +
            "\n<br/> Creado Correctamente"
          BODY.appendChild(PARRAF)
        }
      }

      function ordenarContactos(element) {
        // Funcion para ordenar lista por el parametro que nos dé el usuario
        while (!["nombre", "telefono", "correo"].includes(element)) {
          element = prompt(
            "No es un elemento por el que se pueda ordenar, prueba de nuevo"
          )
        }

        let lista = contactos.sort((a, b) =>
          a[element].localeCompare(b[element])
        )

        lista.forEach((contacto, indice) => {
          console.log(
            "Contacto Nº" + (indice + 1) + ": ",
            contacto.nombre + " /",
            contacto.telefono + " /",
            contacto.correo
          )

          // insertamos en HTML los contactos
          PARRAF.innerHTML +=
            "Contacto: " +
            contacto.nombre +
            " / " +
            contacto.telefono +
            " / " +
            contacto.correo +
            "\n<br/>"
        })
        BODY.appendChild(PARRAF)
      }
    </script>
  </body>
</html>
